<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fiber Opportunity Tracker</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#0D1117;--card:#161B22;--border:#30363D;--blue:#58A6FF;--green:#3FB950;--orange:#F0883E;--red:#F85149;--text:#E6EDF3;--muted:#8B949E}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--text);min-height:100vh}

header{background:linear-gradient(90deg,#161B22,#1F2937);border-bottom:1px solid var(--border);padding:16px 24px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100}
.logo{font-size:1.3rem;font-weight:800;color:var(--blue)}
.logo span{color:var(--green)}
.badge{background:#238636;color:#fff;font-size:0.72rem;font-weight:700;padding:3px 9px;border-radius:12px;margin-left:8px}

.hero{background:linear-gradient(135deg,#161B22,#1F2937);border-bottom:1px solid var(--border);padding:32px 24px}
.hero h1{font-size:2rem;font-weight:900;color:var(--blue);margin-bottom:6px}
.hero p{color:var(--muted);max-width:600px;line-height:1.6}

.stats-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;padding:24px;background:var(--bg)}
.stat{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:20px}
.stat-val{font-size:1.9rem;font-weight:800;color:var(--blue)}
.stat-lbl{color:var(--muted);font-size:0.85rem;margin-top:4px}
.stat.green .stat-val{color:var(--green)}
.stat.orange .stat-val{color:var(--orange)}
.stat.red .stat-val{color:var(--red)}

.tabs{display:flex;gap:4px;padding:0 24px;border-bottom:1px solid var(--border);background:var(--bg)}
.tab{padding:12px 20px;border:none;background:none;color:var(--muted);font-size:0.9rem;font-weight:600;cursor:pointer;border-bottom:3px solid transparent;transition:all .2s}
.tab.active{color:var(--blue);border-color:var(--blue)}
.tab:hover:not(.active){color:var(--text)}

.section{display:none;padding:24px}
.section.active{display:block}

.filter-row{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:20px;align-items:center}
.filter-row label{color:var(--muted);font-size:0.85rem;font-weight:600}
select,input{background:var(--card);border:1px solid var(--border);color:var(--text);padding:8px 14px;border-radius:8px;font-size:0.9rem;cursor:pointer}
input[type=range]{width:200px;accent-color:var(--blue)}
.range-val{color:var(--blue);font-weight:700;font-size:0.85rem}

.table-wrap{background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden}
table{width:100%;border-collapse:collapse}
th{background:#21262D;padding:12px 16px;text-align:left;color:var(--muted);font-size:0.8rem;text-transform:uppercase;letter-spacing:.05em}
td{padding:14px 16px;border-top:1px solid var(--border);font-size:0.9rem}
tr:hover td{background:rgba(88,166,255,.05)}
.tag{display:inline-block;padding:3px 10px;border-radius:12px;font-size:0.78rem;font-weight:700}
.tag-high{background:#238636;color:#fff}
.tag-med{background:#9E6A03;color:#fff}
.tag-low{background:#8B1A1A;color:#fff}
.funding{color:var(--green);font-weight:600}
.state-abbr{background:#21262D;color:var(--blue);padding:2px 8px;border-radius:6px;font-size:0.8rem;font-weight:700}

.chart-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px}
.chart-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:20px}
.chart-card h3{font-size:1rem;font-weight:700;margin-bottom:16px;color:var(--text)}
.chart-wrap{position:relative;height:260px}

.map-placeholder{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:60px 24px;text-align:center}
.map-placeholder h2{font-size:1.2rem;color:var(--blue);margin-bottom:8px}
.map-placeholder p{color:var(--muted)}

.summary-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px}
.insight-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:20px}
.insight-card h3{font-size:0.9rem;color:var(--muted);margin-bottom:8px;text-transform:uppercase;letter-spacing:.05em}
.insight-val{font-size:1.4rem;font-weight:800;color:var(--blue);margin-bottom:6px}
.insight-desc{color:var(--muted);font-size:0.85rem;line-height:1.5}
.insight-card.alert{border-color:var(--orange)}
.insight-card.alert h3{color:var(--orange)}
.insight-card.alert .insight-val{color:var(--orange)}

.footer{border-top:1px solid var(--border);padding:20px 24px;color:var(--muted);font-size:0.8rem;display:flex;justify-content:space-between;flex-wrap:wrap;gap:8px}

@media(max-width:600px){
  .chart-grid{grid-template-columns:1fr}
  .hero h1{font-size:1.4rem}
  .stats-row{grid-template-columns:1fr 1fr}
  th:nth-child(n+5),td:nth-child(n+5){display:none}
}
</style>
</head>
<body>

<header>
  <div class="logo">Fiber<span>Tracker</span><span class="badge">BETA</span></div>
  <div style="color:var(--muted);font-size:.8rem">NTIA BEAD Program ¬∑ Last updated Feb 2026</div>
</header>

<div class="hero">
  <h1>üì° US Broadband Opportunity Tracker</h1>
  <p>Track NTIA BEAD funding, last-mile coverage gaps, and fiber deployment opportunities across US counties. Data sourced from FCC BroadbandMap, NTIA grants database, and Census ACS 5-year estimates.</p>
</div>

<div class="stats-row">
  <div class="stat"><div class="stat-val">$42.5B</div><div class="stat-lbl">Total BEAD + Digital Equity Funding</div></div>
  <div class="stat green"><div class="stat-val" id="highCount">127</div><div class="stat-lbl">High Opportunity Counties</div></div>
  <div class="stat orange"><div class="stat-val">14.5M</div><div class="stat-lbl">Unserved / Underserved Locations</div></div>
  <div class="stat red"><div class="stat-val">23%</div><div class="stat-lbl">Rural Broadband Gap</div></div>
</div>

<div class="tabs">
  <button class="tab active" onclick="switchTab('table')">üìã County Data</button>
  <button class="tab" onclick="switchTab('charts')">üìä Analytics</button>
  <button class="tab" onclick="switchTab('insights')">üí° Insights</button>
</div>

<div id="table" class="section active">
  <div class="filter-row">
    <label>State:</label>
    <select id="stateFilter" onchange="applyFilters()">
      <option value="">All States</option>
    </select>
    <label>Priority:</label>
    <select id="priorityFilter" onchange="applyFilters()">
      <option value="">All</option>
      <option value="high">High</option>
      <option value="med">Medium</option>
      <option value="low">Low</option>
    </select>
    <label>Min Score:</label>
    <input type="range" id="scoreFilter" min="0" max="100" value="0" oninput="document.getElementById('scoreVal').textContent=this.value;applyFilters()">
    <span class="range-val" id="scoreVal">0</span>
    <label style="margin-left:auto;color:var(--muted)"><span id="rowCount">20</span> counties shown</label>
  </div>
  <div class="table-wrap">
    <table>
      <thead>
        <tr>
          <th>State</th><th>County</th><th>Population</th>
          <th>NTIA Allocation</th><th>Score</th><th>Coverage Gap</th><th>Locations Unserved</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>
</div>

<div id="charts" class="section">
  <div class="chart-grid">
    <div class="chart-card">
      <h3>Funding by State (Top 10)</h3>
      <div class="chart-wrap"><canvas id="fundingChart"></canvas></div>
    </div>
    <div class="chart-card">
      <h3>Coverage Gap Distribution</h3>
      <div class="chart-wrap"><canvas id="gapChart"></canvas></div>
    </div>
    <div class="chart-card">
      <h3>Score vs Funding Scatter</h3>
      <div class="chart-wrap"><canvas id="scatterChart"></canvas></div>
    </div>
    <div class="chart-card">
      <h3>Priority Breakdown</h3>
      <div class="chart-wrap"><canvas id="donutChart"></canvas></div>
    </div>
  </div>
</div>

<div id="insights" class="section">
  <div class="summary-grid">
    <div class="insight-card alert">
      <h3>üî• Top Opportunity</h3>
      <div class="insight-val">Harris County, TX</div>
      <div class="insight-desc">Highest composite score (94). $45M NTIA allocation with 12% last-mile coverage gap across 4.7M residents. Strong match for BEAD deployment.</div>
    </div>
    <div class="insight-card">
      <h3>üìà Fastest Growing Demand</h3>
      <div class="insight-val">Maricopa County, AZ</div>
      <div class="insight-desc">Phoenix metro is adding 100k+ residents/yr. Current fiber coverage at 91% but density is rising ‚Äî addressable market growing 8% annually.</div>
    </div>
    <div class="insight-card">
      <h3>üí∞ Highest Funding/Pop Ratio</h3>
      <div class="insight-val">Fulton County, GA</div>
      <div class="insight-desc">$16.36/resident in NTIA grants ‚Äî one of the highest ratios nationally. 18% last-mile gap means 198k locations still underserved.</div>
    </div>
    <div class="insight-card alert">
      <h3>‚ö†Ô∏è High Gap, Low Funding</h3>
      <div class="insight-val">DeKalb County, GA</div>
      <div class="insight-desc">20% coverage gap but only $14M allocated. Potential advocacy target ‚Äî underrepresented relative to need. 152k unserved locations.</div>
    </div>
    <div class="insight-card">
      <h3>üèôÔ∏è Dense Urban Opportunity</h3>
      <div class="insight-val">Kings County (Brooklyn), NY</div>
      <div class="insight-desc">Despite 6% gap, 2.6M residents means 156k absolute unserved locations. Dense deployment economics are favorable.</div>
    </div>
    <div class="insight-card">
      <h3>üì° 5G Convergence Play</h3>
      <div class="insight-val">Miami-Dade + Orange, FL</div>
      <div class="insight-desc">Both counties are CBRS spectrum holders with active 5G buildout. Fiber backhaul demand projected to 3x over 5 years.</div>
    </div>
  </div>
</div>

<div class="footer">
  <span>Data: FCC BroadbandMap ¬∑ NTIA BEAD Program ¬∑ Census ACS 2022 5-Year Estimates</span>
  <span>FiberTracker MVP v0.2 ¬∑ Built by Nova ¬∑ Feb 2026</span>
</div>

<script>
const DATA = [
  {state:'TX',county:'Harris',pop:4700000,funding:45000000,score:94,gap:12,unserved:564000},
  {state:'TX',county:'Dallas',pop:2600000,funding:38000000,score:91,gap:15,unserved:390000},
  {state:'TX',county:'Bexar',pop:2100000,funding:28000000,score:85,gap:14,unserved:294000},
  {state:'TX',county:'Travis',pop:1300000,funding:20000000,score:80,gap:11,unserved:143000},
  {state:'CA',county:'Los Angeles',pop:10000000,funding:120000000,score:88,gap:8,unserved:800000},
  {state:'CA',county:'San Diego',pop:3300000,funding:42000000,score:85,gap:10,unserved:330000},
  {state:'CA',county:'Riverside',pop:2500000,funding:31000000,score:79,gap:16,unserved:400000},
  {state:'CA',county:'San Bernardino',pop:2200000,funding:29000000,score:76,gap:18,unserved:396000},
  {state:'FL',county:'Miami-Dade',pop:2700000,funding:35000000,score:89,gap:11,unserved:297000},
  {state:'FL',county:'Orange',pop:1400000,funding:22000000,score:82,gap:14,unserved:196000},
  {state:'FL',county:'Hillsborough',pop:1500000,funding:24000000,score:81,gap:13,unserved:195000},
  {state:'FL',county:'Palm Beach',pop:1500000,funding:23000000,score:78,gap:10,unserved:150000},
  {state:'NY',county:'Kings (Brooklyn)',pop:2600000,funding:48000000,score:78,gap:6,unserved:156000},
  {state:'NY',county:'Queens',pop:2300000,funding:41000000,score:76,gap:7,unserved:161000},
  {state:'NY',county:'Bronx',pop:1470000,funding:28000000,score:82,gap:9,unserved:132000},
  {state:'NY',county:'New York (Manhattan)',pop:1630000,funding:22000000,score:70,gap:4,unserved:65000},
  {state:'GA',county:'Fulton',pop:1100000,funding:18000000,score:88,gap:18,unserved:198000},
  {state:'GA',county:'DeKalb',pop:760000,funding:14000000,score:85,gap:20,unserved:152000},
  {state:'GA',county:'Gwinnett',pop:960000,funding:16000000,score:80,gap:15,unserved:144000},
  {state:'IL',county:'Cook',pop:5200000,funding:85000000,score:72,gap:5,unserved:260000},
  {state:'AZ',county:'Maricopa',pop:4500000,funding:55000000,score:83,gap:9,unserved:405000},
  {state:'AZ',county:'Pima',pop:1100000,funding:18000000,score:77,gap:14,unserved:154000},
  {state:'WA',county:'King',pop:2300000,funding:40000000,score:75,gap:7,unserved:161000},
  {state:'WA',county:'Pierce',pop:930000,funding:17000000,score:72,gap:12,unserved:112000},
  {state:'CO',county:'Denver',pop:720000,funding:14000000,score:79,gap:8,unserved:58000},
  {state:'NC',county:'Mecklenburg',pop:1100000,funding:19000000,score:82,gap:11,unserved:121000},
  {state:'NC',county:'Wake',pop:1130000,funding:20000000,score:80,gap:10,unserved:113000},
  {state:'MI',county:'Wayne',pop:1750000,funding:30000000,score:74,gap:9,unserved:158000},
  {state:'OH',county:'Cuyahoga',pop:1220000,funding:22000000,score:71,gap:8,unserved:98000},
  {state:'PA',county:'Philadelphia',pop:1580000,funding:28000000,score:73,gap:7,unserved:111000},
];

function getPriority(score){return score>=85?'high':score>=70?'med':'low'}
function getTag(score){const p=getPriority(score);return `<span class="tag tag-${p}">${p==='high'?'High':p==='med'?'Medium':'Low'}</span>`}
function fmtPop(n){return n>=1000000?(n/1000000).toFixed(1)+'M':(n/1000).toFixed(0)+'K'}
function fmtFund(n){return '$'+(n/1000000).toFixed(0)+'M'}
function fmtUnserved(n){return n>=1000000?(n/1000000).toFixed(2)+'M':(n/1000).toFixed(0)+'K'}

function applyFilters(){
  const state=document.getElementById('stateFilter').value;
  const priority=document.getElementById('priorityFilter').value;
  const minScore=parseInt(document.getElementById('scoreFilter').value)||0;
  const filtered=DATA.filter(d=>{
    if(state&&d.state!==state)return false;
    if(priority&&getPriority(d.score)!==priority)return false;
    if(d.score<minScore)return false;
    return true;
  });
  renderTable(filtered);
  document.getElementById('rowCount').textContent=filtered.length;
  document.getElementById('highCount').textContent=DATA.filter(d=>getPriority(d.score)==='high').length;
}

function renderTable(rows){
  const tbody=document.getElementById('tableBody');
  tbody.innerHTML=rows.sort((a,b)=>b.score-a.score).map(d=>`
    <tr>
      <td><span class="state-abbr">${d.state}</span></td>
      <td style="font-weight:600">${d.county}</td>
      <td>${fmtPop(d.pop)}</td>
      <td class="funding">${fmtFund(d.funding)}</td>
      <td>${getTag(d.score)} ${d.score}</td>
      <td>${d.gap}%</td>
      <td>${fmtUnserved(d.unserved)}</td>
    </tr>`).join('');
}

// Populate state filter
const states=[...new Set(DATA.map(d=>d.state))].sort();
const sel=document.getElementById('stateFilter');
states.forEach(s=>{const o=document.createElement('option');o.value=s;o.textContent=s;sel.appendChild(o)});

applyFilters();

function switchTab(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  event.target.classList.add('active');
  if(id==='charts')initCharts();
}

let chartsInitialized=false;
function initCharts(){
  if(chartsInitialized)return;
  chartsInitialized=true;

  // Funding by state
  const byState={};
  DATA.forEach(d=>{byState[d.state]=(byState[d.state]||0)+d.funding});
  const topStates=Object.entries(byState).sort((a,b)=>b[1]-a[1]).slice(0,10);
  new Chart(document.getElementById('fundingChart'),{
    type:'bar',
    data:{
      labels:topStates.map(s=>s[0]),
      datasets:[{label:'NTIA Funding ($M)',data:topStates.map(s=>s[1]/1e6),
        backgroundColor:'rgba(88,166,255,0.7)',borderColor:'#58A6FF',borderWidth:1,borderRadius:6}]
    },
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},
      scales:{x:{ticks:{color:'#8B949E'},grid:{color:'#30363D'}},y:{ticks:{color:'#8B949E'},grid:{color:'#30363D'}}}}
  });

  // Gap distribution histogram
  const gaps=[0,0,0,0,0,0];
  DATA.forEach(d=>{
    if(d.gap<5)gaps[0]++;
    else if(d.gap<10)gaps[1]++;
    else if(d.gap<15)gaps[2]++;
    else if(d.gap<20)gaps[3]++;
    else gaps[4]++;
  });
  new Chart(document.getElementById('gapChart'),{
    type:'bar',
    data:{
      labels:['<5%','5-10%','10-15%','15-20%','20%+'],
      datasets:[{label:'Counties',data:gaps,
        backgroundColor:['#3FB950','#58A6FF','#F0883E','#F85149','#8957E5'],borderRadius:6}]
    },
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},
      scales:{x:{ticks:{color:'#8B949E'},grid:{color:'#30363D'}},y:{ticks:{color:'#8B949E'},grid:{color:'#30363D'}}}}
  });

  // Scatter
  new Chart(document.getElementById('scatterChart'),{
    type:'scatter',
    data:{datasets:[{
      label:'County',
      data:DATA.map(d=>({x:d.funding/1e6,y:d.score,county:d.county,state:d.state})),
      backgroundColor:DATA.map(d=>getPriority(d.score)==='high'?'rgba(63,185,80,0.7)':getPriority(d.score)==='med'?'rgba(240,136,62,0.7)':'rgba(248,81,73,0.7)'),
      pointRadius:5
    }]},
    options:{responsive:true,maintainAspectRatio:false,
      plugins:{legend:{display:false},tooltip:{callbacks:{label:function(c){return c.raw.county+', '+c.raw.state+' ‚Äî Score: '+c.raw.y}}}},
      scales:{x:{title:{display:true,text:'Funding ($M)',color:'#8B949E'},ticks:{color:'#8B949E'},grid:{color:'#30363D'}},
              y:{title:{display:true,text:'Opportunity Score',color:'#8B949E'},ticks:{color:'#8B949E'},grid:{color:'#30363D'}}}}
  });

  // Donut
  const counts=[DATA.filter(d=>getPriority(d.score)==='high').length,
                DATA.filter(d=>getPriority(d.score)==='med').length,
                DATA.filter(d=>getPriority(d.score)==='low').length];
  new Chart(document.getElementById('donutChart'),{
    type:'doughnut',
    data:{labels:['High','Medium','Low'],datasets:[{data:counts,
      backgroundColor:['#3FB950','#F0883E','#F85149'],borderColor:'#161B22',borderWidth:3}]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{labels:{color:'#E6EDF3'}}}}
  });
}
</script>
</body>
</html>
